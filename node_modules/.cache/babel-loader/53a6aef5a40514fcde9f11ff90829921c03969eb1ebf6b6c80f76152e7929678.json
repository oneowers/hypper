{"ast":null,"code":"import{useNavigate}from'react-router-dom';import React,{useState,useEffect}from'react';import'react-loading-skeleton/dist/skeleton.css';import Products from'./products.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}function HomePage(_ref){let{category_id}=_ref;const[products,setProducts]=useState(null);useEffect(()=>{const apiUrl=\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/products/?category_id=\").concat(category_id);fetch(apiUrl).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{setProducts(data);}).catch(error=>{console.error('Error fetching product:',error);});},[window.location.search]);const navigate=useNavigate();const handleCategoryClick=categoryId=>{const category_id=categoryId!=null?categoryId:'';// If categoryId is null, use an empty string\nnavigate(\"/products?data=\".concat(encodeURIComponent(JSON.stringify({category_id}))));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto max-w-2xl px-4 pt-7 pb-3 sm:pt-7 lg:max-w-7xl lg:px-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between space-x-4 items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:classNames(\"text-3xl font-medium text-gray-900\",!products&&\"animate-pulse bg-gray-200 px-14 py-5 rounded-lg\"),children:products&&products[0].category.name}),/*#__PURE__*/_jsxs(\"p\",{onClick:()=>handleCategoryClick(products[0].category.id),className:\" cursor-pointer whitespace-nowrap text-sm font-medium text-indigo-600 hover:text-indigo-500\",children:[\"View all\",/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\" \\u2192\"})]})]})}),/*#__PURE__*/_jsx(Products,{products:products})]});}export default HomePage;","map":{"version":3,"names":["useNavigate","React","useState","useEffect","Products","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","classNames","_len","arguments","length","classes","Array","_key","filter","Boolean","join","HomePage","_ref","category_id","products","setProducts","apiUrl","concat","process","env","REACT_APP_API_BASE_URL","fetch","then","response","ok","Error","json","data","catch","error","console","window","location","search","navigate","handleCategoryClick","categoryId","encodeURIComponent","JSON","stringify","children","className","category","name","onClick","id"],"sources":["/Users/muhammadkamolov/Downloads/knox_mkp/knox_mkp 2/src/pages/productsByCategory.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport React, { useState, useEffect} from 'react'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport Products from './products.jsx'\n\nfunction classNames(...classes) {\n  return classes.filter(Boolean).join(' ')\n  }\n\nfunction HomePage({category_id}) {\n  const [products, setProducts] = useState(null);\n  \n\n  useEffect(() => {\n    const apiUrl = `${process.env.REACT_APP_API_BASE_URL}/api/products/?category_id=${category_id}`;\n  \n  \n    fetch(apiUrl)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return response.json();\n        })\n        .then((data) => {\n            setProducts(data);\n        })\n        .catch((error) => {\n            console.error('Error fetching product:', error);\n        });\n  }, [window.location.search]);\n\n  const navigate = useNavigate();\n\n\n  const handleCategoryClick = (categoryId) => {\n    const category_id = categoryId != null ? categoryId : ''; // If categoryId is null, use an empty string\n    navigate(`/products?data=${encodeURIComponent(JSON.stringify({ category_id }))}`);\n};\n\n\n  return (\n    <>\n    \n<div className=\"mx-auto max-w-2xl px-4 pt-7 pb-3 sm:pt-7 lg:max-w-7xl lg:px-3\">\n          <div className=\"flex justify-between space-x-4 items-center\">\n            <h2 className={classNames(\"text-3xl font-medium text-gray-900\", !products && \"animate-pulse bg-gray-200 px-14 py-5 rounded-lg\" )}>{products && products[0].category.name}</h2>\n            <p onClick={() => handleCategoryClick(products[0].category.id)} className=\" cursor-pointer whitespace-nowrap text-sm font-medium text-indigo-600 hover:text-indigo-500\">\n              View all\n              <span aria-hidden=\"true\"> &rarr;</span>\n            </p>\n          </div>\n        </div>\n\n          <Products products={products} />\n    </>\n  );\n}\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}